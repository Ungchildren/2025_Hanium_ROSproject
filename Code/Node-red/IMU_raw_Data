const data = msg.payload[0] || msg.payload;  // 배열의 첫 번째 요소 또는 단일 객체

if (!data.orientation || !data.angular_velocity || !data.linear_acceleration) {
    node.error("필수 필드가 없습니다.", msg);
    return null;
}

msg.payload = {
    orientation_x: data.orientation.x.toFixed(5),
    orientation_y: data.orientation.y.toFixed(5),
    orientation_z: data.orientation.z.toFixed(5),
    angular_vel_x: data.angular_velocity.x.toFixed(5),
    angular_vel_y: data.angular_velocity.y.toFixed(5),
    angular_vel_z: data.angular_velocity.z.toFixed(5),
    //linear_acc_x: data.linear_acceleration.x.toFixed(5),
    //linear_acc_y: data.linear_acceleration.y.toFixed(5),
    linear_acc_z: data.linear_acceleration.z.toFixed(5),
    timestamp: data.timestamp
};

return msg;
